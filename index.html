<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="PHP-Spider : A configurable and extensible PHP web spider">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>PHP-Spider</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mvdbos/php-spider">View on GitHub</a>

          <h1 id="project_title">PHP-Spider</h1>
          <h2 id="project_tagline">A configurable and extensible PHP web spider</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mvdbos/php-spider/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mvdbos/php-spider/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p><a href="https://travis-ci.org/mvdbos/php-spider"><img src="https://travis-ci.org/mvdbos/php-spider.png?branch=master" alt="Build Status"></a></p>

<h1>
<a id="php-spider-features" class="anchor" href="#php-spider-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>PHP-Spider Features</h1>

<ul>
<li>supports two traversal algorithms: breadth-first and depth-first</li>
<li>supports depth limiting and queue size limiting</li>
<li>supports adding custom URI discovery logic, based on XPath, CSS selectors, or plain old PHP</li>
<li>comes with a useful set of URI filters, such as Domain limiting</li>
<li>supports custom URI filters, both prefetch (URI) and postfetch (Resource content)</li>
<li>supports custom request handling logic</li>
<li>comes with a useful set of persistence handlers (memory, file. Redis soon to follow)</li>
<li>supports custom persistence handlers</li>
<li>collects statistics about the crawl for reporting</li>
<li>dispatches useful events, allowing developers to add even more custom behavior</li>
<li>supports a politeness policy</li>
<li>will soon come with many default discoverers: RSS, Atom, RDF, etc.</li>
<li>will soon support multiple queueing mechanisms (file, memcache, redis)</li>
<li>will eventually support distributed spidering with a central queue</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>The easiest way to install PHP-Spider is with <a href="http://getcomposer.org/">composer</a>.  Find it on <a href="https://packagist.org/packages/vdb/php-spider">Packagist</a>.</p>

<blockquote>
<p>Note: if you want to run the examples or unit tests, you need to do <code>composer install --dev</code>, so that all dependencies for the examples also get installed.</p>
</blockquote>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>This is a very simple example. This code can be found in <a href="https://github.com/matthijsvandenbos/php-spider/blob/master/example/example_simple.php">example/example_simple.php</a>. For a more complete example with
some logging, caching and filters, see <a href="https://github.com/matthijsvandenbos/php-spider/blob/master/example/example_complex.php">example/example_complex.php</a>. That file contains a more real-world example.</p>

<p>First create the spider</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">VDB\Spider\Spider</span>;</span>
<span class="pl-s1"><span class="pl-k">use</span> <span class="pl-c1">VDB\Spider\Discoverer\XPathExpressionDiscoverer</span>;</span>
<span class="pl-s1"></span>
<span class="pl-s1"><span class="pl-smi">$spider</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">Spider</span>(<span class="pl-s"><span class="pl-pds">'</span>http://www.dmoz.org<span class="pl-pds">'</span></span>);</span></pre></div>

<p>Add a URI discoverer. Without it, the spider does nothing. In this case, we want all <code>&lt;a&gt;</code> nodes from a certain <code>&lt;div&gt;</code></p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>addDiscoverer(<span class="pl-k">new</span> <span class="pl-c1">XPathExpressionDiscoverer</span>(<span class="pl-s"><span class="pl-pds">"</span>//div[@id='catalogs']//a<span class="pl-pds">"</span></span>));</span></pre></div>

<p>Set some sane options for this example. In this case, we only get the first 10 items from the start page.</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>setMaxDepth(<span class="pl-c1">1</span>);</span>
<span class="pl-s1"><span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>setMaxQueueSize(<span class="pl-c1">10</span>);</span></pre></div>

<p>Execute the crawl</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>crawl();</span></pre></div>

<p>When crawling is done, we could get some info about the crawl</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-smi">$stats</span> <span class="pl-k">=</span> <span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>getStatsHandler();</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>SPIDER ID: <span class="pl-pds">"</span></span> <span class="pl-k">.</span> <span class="pl-smi">$stats</span><span class="pl-k">-&gt;</span>getSpiderId();</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>  ENQUEUED:  <span class="pl-pds">"</span></span> <span class="pl-k">.</span> <span class="pl-c1">count</span>(<span class="pl-smi">$stats</span><span class="pl-k">-&gt;</span>getQueued());</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>  SKIPPED:   <span class="pl-pds">"</span></span> <span class="pl-k">.</span> <span class="pl-c1">count</span>(<span class="pl-smi">$stats</span><span class="pl-k">-&gt;</span>getFiltered());</span>
<span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span>  FAILED:    <span class="pl-pds">"</span></span> <span class="pl-k">.</span> <span class="pl-c1">count</span>(<span class="pl-smi">$stats</span><span class="pl-k">-&gt;</span>getFailed());</span></pre></div>

<p>Finally we could do some processing on the downloaded resources. In this example, we will echo the title of all resources</p>

<div class="highlight highlight-text-html-php"><pre><span class="pl-s1"><span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n\n</span>DOWNLOADED RESOURCES: <span class="pl-pds">"</span></span>;</span>
<span class="pl-s1"><span class="pl-k">foreach</span> (<span class="pl-smi">$spider</span><span class="pl-k">-&gt;</span>getPersistenceHandler() <span class="pl-k">as</span> <span class="pl-smi">$resource</span>) {</span>
<span class="pl-s1">    <span class="pl-c1">echo</span> <span class="pl-s"><span class="pl-pds">"</span><span class="pl-cce">\n</span> - <span class="pl-pds">"</span></span> <span class="pl-k">.</span> <span class="pl-smi">$resource</span><span class="pl-k">-&gt;</span>getCrawler()<span class="pl-k">-&gt;</span>filterXpath(<span class="pl-s"><span class="pl-pds">'</span>//title<span class="pl-pds">'</span></span>)<span class="pl-k">-&gt;</span>text();</span>
<span class="pl-s1">}</span>
<span class="pl-s1"></span></pre></div>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>Contributing to PHP-Spider is as easy as Forking the repository on Github and submitting a Pull Request.
The Symfony documentation contains an excellent guide for how to do that properly here: <a href="http://symfony.com/doc/current/contributing/code/patches.html#step-1-setup-your-environment">Submitting a Patch</a>.</p>

<p>There a few requirements for a Pull Request to be accepted:</p>

<ul>
<li>Follow the coding standards: PHP-Spider follows the coding standards defined in the <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>, <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">PSR-1</a> and <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a> Coding Style Guides;</li>
<li>Prove that the code works with unit tests;</li>
</ul>

<blockquote>
<p>Note: An easy way to check if your code conforms to PHP-Spider is by running <a href="https://scrutinizer-ci.com/">Scrutinizer</a> on your local code. You can do it simply by downloading <a href="https://scrutinizer-ci.com/scrutinizer.phar">scrutinizer.phar</a> and running it on your PHP-Spider repository like so: <code>php scrutinizer.phar run /path/to/php-spider</code></p>
</blockquote>

<h2>
<a id="support" class="anchor" href="#support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support</h2>

<p>For things like reporting bugs and requesting features it is best to create an <a href="https://github.com/matthijsvandenbos/php-spider/issues">issue</a> here on GitHub. It is even better to accompany it with a Pull Request. ;-)</p>

<p>If you have other questions, or need some tips, you can send a tweet to <a href="https://twitter.com/phpspider">@phpspider</a> or send an email to <a href="mailto:support@php-spider.org">support@php-spider.org</a>.</p>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>PHP-Spider is licensed under the MIT license.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">PHP-Spider maintained by <a href="https://github.com/mvdbos">mvdbos</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38994599-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
