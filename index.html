<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="PHP-Spider : A configurable and extensible PHP web spider" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>PHP-Spider</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/matthijsvandenbos/php-spider">View on GitHub</a>

          <h1 id="project_title">PHP-Spider</h1>
          <h2 id="project_tagline">A configurable and extensible PHP web spider</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/matthijsvandenbos/php-spider/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/matthijsvandenbos/php-spider/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>PHP-Spider Features</h1>

<ul>
<li>supports two traversal algorithms: breadth-first and depth-first</li>
<li>supports depth limiting and queue size limiting</li>
<li>supports adding custom URI discovery logic, based on XPath, CSS selectors, or plain old PHP</li>
<li>comes with a useful set of prebuilt URI filters, such as Domain limiting</li>
<li>supports custom filters, both prefetch (URI) and postfetch (Resource content)</li>
<li>supports custom request handling logic</li>
<li>dispatches useful events, allowing developers to add even more custom behavior</li>
<li>supports a politeness policy</li>
<li>will soon come with many default discoverers: RSS, Atom, RDF, etc.</li>
<li>will soon support multiple queueing and persistence mechanisms (file, memcache, redis)</li>
<li>will eventually support distributed spidering with a central queue</li>
</ul><h2>Usage</h2>

<p>This is a very simple example. This code can be found in <a href="https://github.com/matthijsvandenbos/php-spider/blob/master/example/example_simple.php">example/example_simple.php</a>. For a more complete example with
some logging, caching and filters, see <a href="https://github.com/matthijsvandenbos/php-spider/blob/master/example/example_complex.php">example/example_complex.php</a>. That file contains a more real-world example.</p>

<p>First create the spider</p>

<div class="highlight"><pre><span class="k">use</span> <span class="nx">VDB\Spider\Spider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">VDB\Spider\Discoverer\XPathExpressionDiscoverer</span><span class="p">;</span>

<span class="nv">$spider</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Spider</span><span class="p">(</span><span class="s1">'http://www.dmoz.org'</span><span class="p">);</span>
</pre></div>

<p>Add a URI discoverer. Without it, the spider does nothing. In this case, we want all <code>&lt;a&gt;</code> nodes from a certain <code>&lt;div&gt;</code></p>

<div class="highlight"><pre><span class="nv">$spider</span><span class="o">-&gt;</span><span class="na">addDiscoverer</span><span class="p">(</span><span class="k">new</span> <span class="nx">XPathExpressionDiscoverer</span><span class="p">(</span><span class="s2">"//div[@id='catalogs']//a"</span><span class="p">));</span>
</pre></div>

<p>Set some sane options for this example. In this case, we only get the first 10 items from the start page.</p>

<div class="highlight"><pre><span class="nv">$spider</span><span class="o">-&gt;</span><span class="na">setMaxDepth</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="nv">$spider</span><span class="o">-&gt;</span><span class="na">setMaxQueueSize</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
</pre></div>

<p>Execute crawl</p>

<div class="highlight"><pre><span class="nv">$report</span> <span class="o">=</span> <span class="nv">$spider</span><span class="o">-&gt;</span><span class="na">crawl</span><span class="p">();</span>
</pre></div>

<p>And finally, we could get some info about the crawl</p>

<div class="highlight"><pre><span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">ENQUEUED: "</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$report</span><span class="p">[</span><span class="s1">'queued'</span><span class="p">]);</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2"> - "</span><span class="o">.</span><span class="nb">implode</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2"> - "</span><span class="p">,</span> <span class="nv">$report</span><span class="p">[</span><span class="s1">'queued'</span><span class="p">]);</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">SKIPPED:   "</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$report</span><span class="p">[</span><span class="s1">'filtered'</span><span class="p">]);</span>
<span class="k">echo</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">FAILED:    "</span> <span class="o">.</span> <span class="nb">count</span><span class="p">(</span><span class="nv">$report</span><span class="p">[</span><span class="s1">'failed'</span><span class="p">])</span> <span class="o">.</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">;</span>
</pre></div>

<h2>CONTRIBUTING</h2>

<p>Contributing to PHP-Spider is as easy as Forking the repository on Github and submitting a Pull Request. 
The Symfony documentation contains an excellent guide for how to do that properly here: <a href="http://symfony.com/doc/current/contributing/code/patches.html#step-1-setup-your-environment">Submitting a Patch</a>.</p>

<p>There a few requirements for a Pull Request to be accepted:</p>

<ul>
<li>Follow the coding standards: PHP-Spider follows the coding standards defined in the <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>, <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md">PSR-1</a> and <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md">PSR-2</a> Coding Style Guides;</li>
<li>Prove that the code works with unit tests;</li>
</ul><blockquote>
<p>Note: An easy way to check if your code conforms to PHP-Spider is by running <a href="https://scrutinizer-ci.com/">Scrutinizer</a> on your local code. You can do it simply by downloading <a href="https://scrutinizer-ci.com/scrutinizer.phar">scrutinizer.phar</a> and running it on your PHP-Spider repository like so: <code>php scrutinizer.phar run /path/to/php-spider</code></p>
</blockquote>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">PHP-Spider maintained by <a href="https://github.com/matthijsvandenbos">matthijsvandenbos</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38994599-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
